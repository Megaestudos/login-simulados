<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Acesso | Plataforma de Simulados</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#0b1220;
  --panel:#0f172a;
  --border:#1e293b;
  --primary:#2563eb;
  --primary-dark:#1e40af;
  --text:#e5e7eb;
  --muted:#94a3b8;
  --danger:#f87171;
  --success:#22c55e;
  --radius:20px;
}
body.resume-only #loginForm {display:none}
*{box-sizing:border-box}
html,body{height:100%}
body{
margin:0;font-family:Inter;background:radial-gradient(900px 600px at 15% 15%, rgba(37,99,235,.18), transparent 60%),radial-gradient(800px 600px at 85% 20%, rgba(16,185,129,.12), transparent 60%),var(--bg);color:var(--text)}
.page{min-height:100%;display:grid;place-items:center;padding:24px}
.shell{width:100%;max-width:1100px;display:grid;grid-template-columns:1.1fr .9fr;gap:28px}
@media(max-width:900px){.shell{grid-template-columns:1fr}.marketing{display:none}}
.marketing{padding:26px}
.marketing h1{font-size:40px;margin:0 0 12px}
.marketing p{font-size:17px;color:#cbd5f5}
.bullets{list-style:none;padding:0;margin:24px 0;display:grid;gap:12px}
.bullets li::before{content:"✓";color:var(--success);margin-right:8px}
.card{background:linear-gradient(180deg,rgba(255,255,255,.04),transparent);border:1px solid var(--border);border-radius:20px;padding:26px}
.brand{display:flex;gap:10px;margin-bottom:16px}
.brand-dot{width:12px;height:12px;border-radius:999px;background:#2563eb}
input{width:100%;padding:13px;border-radius:14px;border:1px solid var(--border);background:#020617;color:white}
button.primary{width:100%;padding:13px;border-radius:14px;border:0;background:#2563eb;color:white;font-weight:800}
.link{background:none;border:0;color:#93c5fd;font-weight:700}
.msg{margin-top:10px;font-size:13px;color:#f87171;text-align:center}
.overlay{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center}
.overlay.show{display:flex}
.modal{background:#020617;padding:22px;border-radius:18px;width:100%;max-width:420px}
</style>
</head>

<body>

<div class="page">
<div class="shell">

<div class="marketing">
<h1>Estude com foco em aprovação</h1>
<p>Simulados completos e atualizados.</p>
<ul class="bullets">
<li>Mais de 3.000 questões</li>
<li>Simulados reais</li>
<li>Acesso imediato</li>
<li>Plataforma segura</li>
</ul>
</div>

<div class="card">

<div id="resumeBox" style="display:none">
<div>Você já está logado</div>
<div id="resumeEmail"></div>
<button class="primary" id="btnResume">Voltar</button>
<button class="link" id="btnLogout">Trocar conta</button>
</div>

<div id="loginForm">
<input id="email" placeholder="E-mail">
<input id="senha" type="password" placeholder="Senha">
<button class="primary" id="btnLogin">Entrar</button>
<button class="link" id="btnSignupOpen">Criar conta</button>
<button class="link" id="btnResetOpen">Esqueci senha</button>
<div id="msg" class="msg"></div>
</div>

</div>
</div>
</div>

<div id="signupModal" class="overlay">
<div class="modal">
<input id="sEmail" placeholder="E-mail">
<input id="sPass" type="password" placeholder="Senha">
<input id="sPass2" type="password" placeholder="Confirmar senha">
<button class="primary" id="btnSignup">Criar conta</button>
<button class="link" id="btnSignupClose">Cancelar</button>
<div id="sMsg" class="msg"></div>
</div>
</div>

<div id="resetModal" class="overlay">
<div class="modal">
<input id="rEmail" placeholder="E-mail">
<button class="primary" id="btnResetSend">Enviar link</button>
<button class="link" id="btnResetClose">Cancelar</button>
<div id="rMsg" class="msg"></div>
</div>
</div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js";
import { getAuth,signInWithEmailAndPassword,createUserWithEmailAndPassword,sendEmailVerification,sendPasswordResetEmail,signOut } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-auth.js";
import { getFirestore,doc,setDoc,serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore.js";

const firebaseConfig={
apiKey:"AIzaSyB36ZszS8v_DeOn3at7zEo_tFq86WU0sI4",
authDomain:"simulados-concursos-22c91.firebaseapp.com",
projectId:"simulados-concursos-22c91"
};

const app=initializeApp(firebaseConfig);
const auth=getAuth(app);
const db=getFirestore(app);
const $=id=>document.getElementById(id);

$("btnLogin").onclick=async()=>{
try{
const cred=await signInWithEmailAndPassword(auth,$("email").value,$("senha").value);

localStorage.setItem("auth_user",cred.user.email);

await setDoc(doc(db,"users",cred.user.uid),{
email:cred.user.email,
ultimoLogin:serverTimestamp()
},{merge:true});

location.href="https://megaestudos.github.io/Quiz-Guarda-Civil-Premium/";
}catch{$("msg").innerText="Erro no login"}
};

$("btnSignup").onclick=async()=>{
if($("sPass").value!==$("sPass2").value)return;

const cred=await createUserWithEmailAndPassword(auth,$("sEmail").value,$("sPass").value);
await sendEmailVerification(cred.user);

await setDoc(doc(db,"users",cred.user.uid),{
email:cred.user.email,
criadoEm:serverTimestamp(),
ultimoLogin:serverTimestamp()
});

$("sMsg").innerText="Conta criada";
};

$("btnResetSend").onclick=async()=>{
await sendPasswordResetEmail(auth,$("rEmail").value);
$("rMsg").innerText="Link enviado";
};

$("btnSignupOpen").onclick=()=>signupModal.classList.add("show");
$("btnSignupClose").onclick=()=>signupModal.classList.remove("show");
$("btnResetOpen").onclick=()=>resetModal.classList.add("show");
$("btnResetClose").onclick=()=>resetModal.classList.remove("show");

</script>
</body>
</html>
